{% extends 'base.html.twig' %}

{% block title %}Détail d'un stagiaire{% endblock %}

{% block body %}
        {% if app.user %}
        <h1>Fiche stagiaire</h1>

        {# affichage détail stagiaire  #}
        <div class="list">
                <table class="table-bordered">
                    <thead>
                      <tr>
                        <th class="th" scope="col">Nom</th>
                        <th class="th" scope="col">Date de naissance</th>
                        <th class="th" scope="col">Courriel</th>
                        <th class="th" scope="col">Adresse</th>
                        <th class="th" scope="col">Code postale</th>
                        <th class="th" scope="col">Ville</th>
                      </tr>
                    </thead>
                    <tbody>
                
                        <tr>
                          <td>{{ stagiaire }}</td>
                          <td>{{ stagiaire.dateNaissance|date('d-m-Y') }}</td>
                          <td>{{ stagiaire.email }}</td>
                          <td>{{ stagiaire.adresse }}</td>
                          <td>{{ stagiaire.cp }}</td> 
                          <td>{{ stagiaire.ville }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        {% else %}
            <meta http-equiv="refresh" content="0;url={{ path('app_login') }}">
    {% endif %}

        {# vérifie si tableau vide  #}
        {% if stagiaire.sessions|length == 0 %}
        <h1>Sessions prévues</h1>
            <h3>Aucune session prévue</h3>
        {% else %}
            <h1>Sessions prévues</h1>
            {# affiche session stagiaire prévue  #}
            {% for session in stagiaire.sessions %}
                {% for inscription in session.inscriptions %}
                    {% if inscription.id == stagiaire.id %}
                    <ul>
                        <li>
                        <p class="titre"><h5> <a href="{{ path('show_session', {'id': session.id}) }}">{{ session.titre }} </a>  {{ ' ( du ' ~ session.dateDebut|date('d-m-Y') ~ ' au ' ~ session.dateFin|date('d-m-Y') ~ ' ) ' }}<a href="{{ path('deleteStagiaire_session', {'id': session.id, 'inscriptionId': inscription.id}) }}"><i class="fa-solid fa-trash"></i></a>
                        </li>
                    </ul>
                    {% endif %}
                {% endfor %}
        {% endfor %}
        {% endif %}


    

{% endblock %}
